<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ATS Skills & CV Optimisation | Experience4Grads</title>
  <!-- Optional external stylesheet if present -->
  <link rel="stylesheet" href="style.css">
  <style>
    /* Overall container with gradient border */
    .skills-container {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 2rem 2rem;
      /* Increase border thickness for a more pronounced gradient frame */
      border: 6px solid transparent;
      /* Use the updated palette for the border gradient */
      border-image: linear-gradient(45deg, #0a4e92, #e64a19) 1;
      border-radius: 12px;
      background-color: #fff;
    }
    /* Lighten the navigation bar gradient for readability */
    .subnav {
      /* Navigation bar gradient updated to match the logo colours */
      background: linear-gradient(135deg, #0a4e92, #e64a19);
      padding: 0.75rem 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .subnav a {
      color: #fff;
      text-decoration: none;
      margin-right: 1rem;
      font-weight: 600;
    }
    .subnav a:hover {
      text-decoration: underline;
    }
    .brand {
      font-size: 1.05rem;
    }
    /* Hero section with lighter gradient and brighter text */
    .skills-hero {
      /* Use updated palette: start with dark blue and fade into orange for a subtle gradient */
      background: linear-gradient(135deg, #0a4e92, #e64a19);
      color: #ffffff;
      text-shadow: 0 1px 2px rgba(0,0,0,0.35);
      padding: 2rem;
      border-radius: 0.75rem;
      text-align: center;
      margin-bottom: 2rem;
    }
    .skills-hero h1 {
      margin: 0 0 0.5rem 0;
      font-size: 2.75rem;
      font-weight: 700;
    }
    .skills-hero p {
      margin: 0;
      line-height: 1.5;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    /* Industry headings */
    .industry-title {
      /* Make section headings more prominent */
      font-size: 2.3rem;
      color: #e64a19;
      margin-bottom: 0.5rem;
    }
    .industry-description {
      font-size: 0.9rem;
      color: #1c2a3a;
      opacity: 0.8;
      margin-bottom: 1.5rem;
    }
    /* Grid layout for skill packs */
    .skill-pack-grid {
      display: grid;
      gap: 1.5rem;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    }
    /* Card styling for each pack */
    .skill-pack-card {
      background-color: #fafafa;
      border: 1px solid #e0e5ec;
      border-radius: 8px;
      padding: 1rem 1.25rem;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .skill-pack-card h4 {
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1.25rem;
      color: #173a60;
    }
    .skill-pack-card p {
      flex-grow: 1;
      margin: 0 0 1rem 0;
      font-size: 0.9rem;
      color: #333;
    }
    /* Start training button inside each card */
    .start-btn {
      align-self: flex-start;
      background: linear-gradient(135deg, #0a4e92, #e64a19);
      padding: 0.5rem 1rem;
      border-radius: 4px;
      text-align: center;
    }
    .start-btn a {
      color: #fff;
      text-decoration: none;
      font-weight: 600;
      display: block;
    }

    /* ---------------------------------------------
       Subscription section styles
       A new callâ€‘toâ€‘action at the top of the skills page
       encourages users to subscribe before accessing
       individual packs. It uses a light card layout and
       a colourful gradient button consistent with the siteâ€™s
       existing colour palette.
    ---------------------------------------------- */
    .skills-subscribe {
      max-width: 720px;
      margin: 2rem auto;
      padding: 1.5rem 1rem;
      border: 1px solid #e0e5ec;
      border-radius: 8px;
      background-color: #fafafa;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    .skills-subscribe .product {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .skills-subscribe .product svg {
      flex-shrink: 0;
    }
    .skills-subscribe .product h3 {
      margin: 0;
      font-size: 1.5rem;
      color: #173a60;
    }
    .skills-subscribe .product h5 {
      margin: 0;
      font-size: 1rem;
      color: #555;
      font-weight: 500;
    }
    .skills-subscribe .btn-subscribe {
      display: inline-block;
      padding: 12px 18px;
      border-radius: 10px;
      border: 1px solid #ddd;
      text-decoration: none;
      font-weight: 600;
      /* Use updated palette for subscribe button */
      background: linear-gradient(135deg, #0a4e92, #e64a19);
      color: #ffffff;
      white-space: nowrap;
    }
    .skills-subscribe .btn-subscribe:hover {
      filter: brightness(0.95);
    }

    /* Account dropdown styling (copied and modified to match index page) */
    .nav-account {
      position: relative;
      margin-left: 1rem;
    }
    /* Circular avatar button */
    .account-btn {
      background-color: #e64a19;
      border: none;
      color: #ffffff;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .account-btn:hover {
      filter: brightness(0.9);
    }
    .nav-account-menu {
      position: absolute;
      top: 110%;
      right: 0;
      background-color: #ffffff;
      color: #1c2a3a;
      border: 1px solid #e0e5ec;
      border-radius: 6px;
      min-width: 220px;
      padding: 0.5rem 0;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      display: none;
      z-index: 200;
    }
    .nav-account-menu a,
    .nav-account-menu button.menu-btn {
      display: block;
      width: 100%;
      padding: 0.5rem 0.75rem;
      background: transparent;
      border: none;
      text-align: left;
      cursor: pointer;
      font-size: 0.9rem;
      text-decoration: none;
      color: #1c2a3a;
    }
    .nav-account-menu a:hover,
    .nav-account-menu button.menu-btn:hover {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>
  <header class="subnav">
    <!-- Replace text brand with the Experience4Grads logo -->
    <a href="index.html" class="brand" style="display:flex; align-items:center;">
      <img src="logo.jpeg" alt="Experience4Grads logo" style="height:40px; width:auto; object-fit:contain;">
    </a>
    <nav>
      <a href="index.html">Home</a>
      <a href="jobs.html">Microâ€‘Internships</a>
      <a href="skills.html">Skills &amp; CV</a>
      <!-- Add a manage subscription link pointing to the Stripe customer portal -->
      <!-- Use the live customer portal link (not the portal configuration ID) so customers can manage or cancel their subscription. -->
      <a href="https://billing.stripe.com/p/login/8x2aEX0LOdpWgoIgUqcbC00" target="_blank" rel="noopener" style="font-weight:600; padding:0.25rem 0.6rem; border-radius:4px; background:linear-gradient(135deg, #0a4e92, #e64a19); color:#fff; text-decoration:none;">Manage Subscription</a>
    </nav>
    <!-- Account dropdown: users must log in with an email to access the packs -->
    <div class="nav-account">
      <button id="accountBtn" class="account-btn">Login</button>
      <div id="accountMenu" class="nav-account-menu">
        <p id="accountStatus" style="padding:0.5rem 0.75rem; font-weight: bold;">Not logged in</p>
        <a href="skills.html">Skills</a>
        <button id="loginBtn" class="menu-btn">Login / Sign Up</button>
        <button id="logoutBtn" class="menu-btn" style="display:none;">Logout</button>
      </div>
    </div>
  </header>
  <main>
    <div class="skills-container">
      <section class="skills-hero">
        <h1>ATS Skills &amp; CV Optimisation</h1>
        <p>Prepare your CV and applications to pass Applicant Tracking Systems and stand out in the job market. Our training packs teach you how to craft ATSâ€‘friendly CVs, tailor your applications and highlight your skills effectively.</p>
      </section>
      <!-- Subscription callâ€‘toâ€‘action -->
      <section id="subscribe" class="skills-subscribe">
        <div class="product">
          <!-- icon reused from existing subscription snippet -->
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
            <path fill="#E184DF" d="M127,50 L126,50 C123.238576,50 121,47.7614237 121,45 C121,42.2385763 123.238576,40 126,40 L135,40 L135,56 L133,56 L133,42 L129,42 L129,56 L127,56 L127,50 Z M127,48 L127,42 L126,42 C124.343146,42 123,43.3431458 123,45 C123,46.6568542 124.343146,48 126,48 L127,48 Z" transform="translate(-121 -40)"/>
          </svg>
          <div class="description">
            <h3>Skills Package Plan</h3>
            <h5>Â£4.99 / month</h5>
          </div>
        </div>
        <!-- Real Stripe Payment Link -->
        <!-- When clicked, the subscribeClicked() function will set a perâ€‘user subscription flag in localStorage. -->
        <a href="https://buy.stripe.com/8x2aEX0LOdpWgoIgUqcbC00" class="btn-subscribe" target="_blank" rel="noopener">Unlock all packs â€“ Â£4.99/month</a>
      </section>
      <!-- Finance & Accounting -->
      <section class="industry-section">
        <h2 class="industry-title">Finance &amp; Accounting</h2>
        <p class="industry-description">These competencies span foundational tools like Excel and SQL, as well as financial reporting, cost accounting, tax preparation, financial modelling and risk management.</p>
        <div class="skill-pack-grid">
          <div class="skill-pack-card">
            <h4>Microsoft Excel &amp; Advanced Spreadsheet Modelling</h4>
            <p>Master advanced Excel functions, build dynamic spreadsheets and create dataâ€‘driven financial models.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-excel.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>SQL &amp; Big Data Analysis</h4>
            <p>Learn to write complex SQL queries and explore big data using modern analysis techniques.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-sql.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Financial Reporting &amp; Cost Accounting</h4>
            <p>Build accurate financial statements and perform cost analyses to support business decisions.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-financial-reporting.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Tax Preparation &amp; Planning</h4>
            <p>Understand tax rules, prepare returns and explore planning strategies for compliance.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-tax-preparation.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Financial Modelling, Risk &amp; Investment Analysis</h4>
            <p>Develop robust financial models and evaluate investments using DCF and risk metrics.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-financial-modeling.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Compliance, Audit &amp; Portfolio Management</h4>
            <p>Design audit checklists, ensure regulatory compliance and manage investment portfolios.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-compliance-audit.html">Start training</a></div>
          </div>
        </div>
      </section>
      <!-- Information Technology -->
      <section class="industry-section">
        <h2 class="industry-title">Information Technology</h2>
        <p class="industry-description">These skills cover programming languages, web development, frameworks, database and cloud technologies, DevOps practices and data analysis.</p>
        <div class="skill-pack-grid">
          <div class="skill-pack-card">
            <h4>Programming Languages</h4>
            <p>Practise coding fundamentals in Python, Java and C#, solving realâ€‘world problems.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-programming.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Web Development: HTML, CSS &amp; JavaScript</h4>
            <p>Build responsive websites from scratch using HTML, CSS and JavaScript.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-web-development.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Frontâ€‘End Frameworks</h4>
            <p>Create an interactive application using React, Angular or Vue.js.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-frameworks.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Database &amp; Cloud Technologies</h4>
            <p>Design databases and experiment with SQL/NoSQL and cloud services such as AWS or Azure.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-database-cloud.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>DevOps &amp; Containerisation</h4>
            <p>Set up CI/CD pipelines and deploy services with Docker and Kubernetes.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-devops.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Cybersecurity, Data Analysis &amp; Visualisation</h4>
            <p>Implement basic security practices, analyse datasets and create insightful visualisations.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-cybersecurity-data.html">Start training</a></div>
          </div>
        </div>
      </section>
      <!-- Healthcare -->
      <section class="industry-section">
        <h2 class="industry-title">Healthcare</h2>
        <p class="industry-description">Healthcare roles emphasise numerical accuracy, lifeâ€‘support techniques, infection control, emergency care, medication administration and specialist areas.</p>
        <div class="skill-pack-grid">
          <div class="skill-pack-card">
            <h4>Mathematics &amp; Accurate Record Keeping</h4>
            <p>Practise medication dosing calculations and maintain precise healthcare records.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-math-records.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>CPR, ACLS &amp; Basic Life Support</h4>
            <p>Study lifeâ€‘saving protocols and develop action plans for emergency situations.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-cpr.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Infection Control &amp; Emergency Care</h4>
            <p>Create infectionâ€‘control procedures and plan responses to emergency scenarios.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-infection-emergency.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Medication Administration &amp; Patient Education</h4>
            <p>Prepare medication schedules and design patientâ€‘friendly educational materials.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-medication.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Specialisations in Healthcare</h4>
            <p>Explore specialised care requirements across pediatrics, oncology, geriatrics and neonatal units.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-specialisations.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Team Coordination &amp; Cultural Competency</h4>
            <p>Develop interpersonal skills and strategies for managing diverse teams and stress.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-team-coordination.html">Start training</a></div>
          </div>
        </div>
      </section>
      <!-- Art & Design -->
      <section class="industry-section">
        <h2 class="industry-title">Art &amp; Design</h2>
        <p class="industry-description">The creative skills listed draw from graphic design, Adobe software, web/app development, typography, storyboarding, 3D modelling and motion graphics.</p>
        <div class="skill-pack-grid">
          <div class="skill-pack-card">
            <h4>Graphic Design &amp; Adobe Creative Suite</h4>
            <p>Design professional graphics using Illustrator, InDesign, Photoshop or free alternatives.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-graphic-design.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Web &amp; App Design (UX/UI)</h4>
            <p>Create polished, userâ€‘friendly websites or apps with modern UX principles.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-web-app-design.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Photo Editing &amp; Typography</h4>
            <p>Enhance images and experiment with typography to achieve visual impact.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-photo-typography.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Storyboarding, Logos &amp; Motion Graphics</h4>
            <p>Plan visual narratives, design logos and animate simple graphics.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-storyboarding.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>3D Modelling, Animation &amp; Video Editing</h4>
            <p>Model and animate a 3D object and edit a short video with creative flair.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-3d-modelling.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Branding, Prototyping &amp; Client Communication</h4>
            <p>Develop a brand identity, build prototypes and communicate effectively with clients.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-branding.html">Start training</a></div>
          </div>
        </div>
      </section>
      <!-- New Category: Professional & Communication Skills -->
      <section class="industry-section">
        <h2 class="industry-title">Professional &amp; Communication Skills</h2>
        <p class="industry-description">Develop essential soft skills such as writing, presenting, collaborating, networking and time management to thrive in any workplace.</p>
        <div class="skill-pack-grid">
          <div class="skill-pack-card">
            <h4>Writing &amp; Email Etiquette</h4>
            <p>Craft clear, professional communications including emails, reports and cover letters.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-writing-communication.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Public Speaking &amp; Presentation Skills</h4>
            <p>Plan and deliver engaging presentations with strong narrative and visuals.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-public-speaking.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Teamwork &amp; Collaboration</h4>
            <p>Coordinate effectively with peers, manage roles and build supportive team environments.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-teamwork-collaboration.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Networking &amp; Professional Branding</h4>
            <p>Build professional relationships online and offline, and polish your personal brand.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-networking.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Time Management &amp; Productivity</h4>
            <p>Adopt tools and techniques to stay organised, prioritise tasks and manage your time effectively.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-time-management.html">Start training</a></div>
          </div>
        </div>
      </section>

      <!-- Law & Legal Services -->
      <section class="industry-section">
        <h2 class="industry-title">Law &amp; Legal Services</h2>
        <p class="industry-description">This track introduces key legal skills across research, drafting, litigation and compliance to help you navigate the legal field.</p>
        <div class="skill-pack-grid">
          <div class="skill-pack-card">
            <h4>Legal Research &amp; Case Analysis</h4>
            <p>Develop research strategies, identify precedents and synthesise case law effectively.</p>
            <!-- When subscribed, this button will redirect to the corresponding pack page -->
            <div class="start-btn"><a href="#subscribe" data-pack="pack-law-research.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Contract Drafting &amp; Negotiation</h4>
            <p>Draft clear contracts, understand key clauses and negotiate agreements with confidence.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-law-contract.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Corporate Law &amp; Compliance</h4>
            <p>Explore corporate law fundamentals, governance structures and regulatory compliance.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-law-corporate.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Intellectual Property &amp; Copyright</h4>
            <p>Protect creative works and innovations through intellectual property and copyright law basics.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-law-ip.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Litigation &amp; Dispute Resolution</h4>
            <p>Understand litigation processes, prepare legal filings and manage dispute resolution effectively.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-law-litigation.html">Start training</a></div>
          </div>
          <div class="skill-pack-card">
            <h4>Ethics &amp; Professional Responsibility</h4>
            <p>Learn ethical duties, client confidentiality and standards of professional conduct in legal practice.</p>
            <div class="start-btn"><a href="#subscribe" data-pack="pack-law-ethics.html">Start training</a></div>
          </div>
        </div>
      </section>
    </div>
  </main>
  <footer>
    <p style="text-align:center; margin-top:2rem;">&copy; 2025 Experience4Grads. All rights reserved.</p>
  </footer>

  <!-- Load Netlify Identity for authentication when deployed on Netlify -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- Account management, simple login system and subscription gating -->
  <script>
    // Retrieve the current user email from localStorage
    function getCurrentUser() {
      return JSON.parse(localStorage.getItem('currentUser') || 'null');
    }
    // Save the current user email to localStorage
    function setCurrentUser(email) {
      localStorage.setItem('currentUser', JSON.stringify(email));
    }
    // Remove the user from storage to log out
    function logoutUser() {
      localStorage.removeItem('currentUser');
    }
    // Check if the current user has paid for the subscription
    function hasSubscription() {
      const user = getCurrentUser();
      if (!user) return false;
      // Use a perâ€‘user flag to determine subscription status. Ignore any global flag.
      const flagKey = 'subscriptionPaid_' + user;
      return localStorage.getItem(flagKey) === 'true';
    }

    // Check if a user is currently logged in
    function isLoggedIn() {
      return !!getCurrentUser();
    }
    // Update the account dropdown UI based on login state
    function updateAccountUI() {
      const user = getCurrentUser();
      const accountBtn = document.getElementById('accountBtn');
      const accountStatus = document.getElementById('accountStatus');
      const loginBtn = document.getElementById('loginBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      if (!accountBtn) return;
      if (!user) {
        // Show a generic user icon when not logged in
        accountBtn.textContent = 'ðŸ‘¤';
        if (accountStatus) accountStatus.textContent = 'Not logged in';
        if (loginBtn) loginBtn.style.display = 'block';
        if (logoutBtn) logoutBtn.style.display = 'none';
      } else {
        // Use the first initial of the email as the avatar label
        const initial = user.charAt(0).toUpperCase();
        accountBtn.textContent = initial;
        if (accountStatus) accountStatus.textContent = 'Logged in as ' + user;
        if (loginBtn) loginBtn.style.display = 'none';
        if (logoutBtn) logoutBtn.style.display = 'block';
      }
    }
    // Toggle visibility of the account menu
    function toggleAccountMenu() {
      const menu = document.getElementById('accountMenu');
      if (menu) {
        menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
      }
    }
    // When subscribe button is clicked, mark subscription as paid for the loggedâ€‘in user
    function subscribeClicked() {
      const user = getCurrentUser();
      if (!user) {
        alert('Please log in with your email before subscribing.');
        return;
      }
      const flagKey = 'subscriptionPaid_' + user;
      // Open the Stripe checkout page in a new tab. This gives the user a chance to complete payment
      // while simultaneously marking the subscription in local storage for gating purposes.
      window.open('https://buy.stripe.com/8x2aEX0LOdpWgoIgUqcbC00', '_blank');
      localStorage.setItem(flagKey, 'true');
    }
    // Attach gating logic to all start training buttons
    function attachStartHandlers() {
      const buttons = document.querySelectorAll('.start-btn a');
      buttons.forEach(function(link) {
        link.addEventListener('click', function(e) {
          // Users must be logged in to access the training packs
          if (!isLoggedIn()) {
            e.preventDefault();
            alert('Please log in with your email before starting training.');
            return;
          }
          // If the user is not subscribed, redirect to payment and prevent default
          if (!hasSubscription()) {
            e.preventDefault();
            // Open payment link in a new tab so users can return to this page
            window.open('https://buy.stripe.com/8x2aEX0LOdpWgoIgUqcbC00', '_blank');
            return;
          }
          // User is logged in and subscribed
          const pack = link.getAttribute('data-pack');
          if (pack) {
            // Navigate to the pack page specified in the data attribute
            e.preventDefault();
            window.location.href = pack;
          } else {
            // For packs without a data-pack attribute, show a placeholder message
            e.preventDefault();
            alert('You are subscribed! Training content will be available here soon.');
          }
        });
      });
    }
    document.addEventListener('DOMContentLoaded', function() {
      // Attach click listener to subscribe button to mark the subscription
      const subscribeBtn = document.querySelector('.btn-subscribe');
      if (subscribeBtn) {
        subscribeBtn.addEventListener('click', subscribeClicked);
      }
      // Attach gating handlers for start buttons
      attachStartHandlers();
      updateAccountUI();
      const accountBtn = document.getElementById('accountBtn');
      const loginBtn = document.getElementById('loginBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      const menu = document.getElementById('accountMenu');
      if (accountBtn) accountBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        toggleAccountMenu();
      });
      // Netlify Identity integration
      if (typeof netlifyIdentity !== 'undefined') {
        netlifyIdentity.on('init', user => {
          if (user && user.email) {
            setCurrentUser(user.email);
          } else {
            logoutUser();
          }
          updateAccountUI();
        });
        netlifyIdentity.on('login', user => {
          if (user && user.email) {
            setCurrentUser(user.email);
          }
          updateAccountUI();
          netlifyIdentity.close();
        });
        netlifyIdentity.on('logout', () => {
          logoutUser();
          updateAccountUI();
        });
        netlifyIdentity.init();
      }
      if (loginBtn) loginBtn.addEventListener('click', function() {
        if (typeof netlifyIdentity !== 'undefined') {
          netlifyIdentity.open('login');
        } else {
          const email = prompt('Please enter your email to sign in (Google/Outlook):');
          if (email) {
            setCurrentUser(email.trim());
            updateAccountUI();
            if (menu) menu.style.display = 'none';
          }
        }
      });
      if (logoutBtn) logoutBtn.addEventListener('click', function() {
        if (typeof netlifyIdentity !== 'undefined') {
          netlifyIdentity.logout();
        } else {
          logoutUser();
          updateAccountUI();
        }
        if (menu) menu.style.display = 'none';
      });
      // Hide the account menu when clicking outside
      document.body.addEventListener('click', function(e) {
        const menu = document.getElementById('accountMenu');
        const accountBtn = document.getElementById('accountBtn');
        if (menu && !menu.contains(e.target) && e.target !== accountBtn) {
          menu.style.display = 'none';
        }
      });
    });
  </script>
</body>
</html>